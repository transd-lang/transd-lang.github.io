<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<title>Transd development progress</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="content-language" content="en-US">
<meta name="language" content="English">
<meta name="description" content="Transd development progress.">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="css/main.css" rel="stylesheet" type="text/css" />
<link href="css/codehighlight.css" rel="stylesheet" type="text/css" />
<link href="css/tsd.css" rel="stylesheet" type="text/css" />
<style type="text/css">
article{ padding-top: 10px;}
pre{ background-color: #efefef; font: 1em "Courier New", monospace; }
p{line-height: 1.5em;}
hr {
  border-top: 1px solid #eee;
  width: 75%;
  margin: 40px auto 20px auto;
  color: #bbb;
}
</style>
</head>
<body>
<div id="header">
  <h1>Transd</h1>
  <ul id="menu">
    <li><a href="index.html">home</a></li>
    <li><a href="download.html">download</a></li>
    <li><a href="doc/index.html">documentation</a></li>    
    <li><a href="dev.html">development</a></li>
    <li><a href="contact.html">contact</a></li>
  </ul>
</div>
<div class="wrap" style="margin-top: 25px">
<h2 style="margin: 55px 0 20px 0;">The ongoing progress report</h2>
<hr width="100%" style="margin:0 0 35px 0;">
<h3 id="january-results-so-far">January results (so far)</h3>

<p><strong>REDUCE data query</strong><br>
The declarative part of the language has been enriched with the "REDUCE" data query type.</p>

<p><strong>Accurate floating point calculations</strong><br>
The <code>(incr)</code> and <code>(decr)</code> methods were added to the <code>Double</code> type for enabling
accurate calculations with interval arithmetic. For more information and for an example of
using these methods see <a href="http://rosettacode.org/wiki/Safe_addition#Transd">here</a>.</p>

<p><strong>Built-in functions</strong>
A new function <code>(first)</code> takes any number of similarly typed arguments and returns the
first argument evaluating to an equivalent of 'true'.</p>

<div class="codehilite"><pre><span></span><code><span class="nv">MainModule</span><span class="o">:</span> <span class="p">{</span>
    <span class="nv">_start</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> 
        <span class="p">(</span><span class="k">with </span><span class="nv">s</span> <span class="s">&quot;abcd&quot;</span>
            <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">or</span>    <span class="p">(</span><span class="nf">substr</span> <span class="nv">s</span> <span class="s">&quot;e&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">substr</span> <span class="nv">s</span> <span class="s">&quot;b&quot;</span><span class="p">)))</span>
            <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">first</span> <span class="p">(</span><span class="nf">substr</span> <span class="nv">s</span> <span class="s">&quot;e&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">substr</span> <span class="nv">s</span> <span class="s">&quot;b&quot;</span><span class="p">)))</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<pre><code>OUTPUT:

1
bcd
</code></pre>

<p>An example of using this function can be seen <a href="http://rosettacode.org/wiki/Sum_digits_of_an_integer#Transd">here</a>.</p>

<h3 id="2021-dec-31-december-results">2021-Dec-31 | December results</h3>

<p><strong>Lambdas</strong><br>
Transd supports anonymous function objects ("lambda" functions), which can be used in a great many of places, for example:</p>

<div class="codehilite"><pre><span></span><code>   <span class="p">(</span><span class="k">with </span><span class="nv">v</span> <span class="p">[</span><span class="s">&quot;C&quot;</span><span class="o">,</span> <span class="s">&quot;a&quot;</span><span class="o">,</span> <span class="s">&quot;D&quot;</span><span class="o">,</span> <span class="s">&quot;b&quot;</span><span class="o">,</span> <span class="s">&quot;A&quot;</span><span class="p">]</span>
       <span class="p">(</span><span class="nf">sort</span> <span class="nv">v</span> <span class="p">(</span><span class="k">lambda </span><span class="nv">l</span> <span class="nv">String</span><span class="p">()</span> <span class="nv">r</span> <span class="nv">String</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nv">Bool</span><span class="p">()</span>
              <span class="p">(</span><span class="nf">ret</span> <span class="p">(</span><span class="nf">less</span> <span class="p">(</span><span class="nf">tolower</span> <span class="nv">l</span><span class="p">)</span> <span class="p">(</span><span class="nf">tolower</span> <span class="nv">r</span><span class="p">)))))</span>
       <span class="p">(</span><span class="nf">lout</span> <span class="nv">v</span><span class="p">))</span> <span class="c1">//&lt;= [a, A, b, C, D]</span>
</code></pre></div>

<p>Now, anonymous lambdas are supplemented with named variables of <code>Lambda</code> type. <code>Lambda</code> objects can be copied, passed as arguments to functions, returned from functions, etc. That is, they are just another data type.</p>

<div class="codehilite"><pre><span></span><code>   <span class="p">(</span><span class="k">with </span><span class="nv">lam</span> <span class="nv">Lambda</span><span class="o">&lt;</span><span class="nb">String Null&gt;</span><span class="p">(</span><span class="nf">λ</span> <span class="nv">s</span> <span class="nv">String</span><span class="p">()</span> 
         <span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;Hello, &quot;</span> <span class="nv">s</span> <span class="s">&quot;!&quot;</span><span class="p">)</span> <span class="p">)</span>

         <span class="p">(</span><span class="nf">exec</span> <span class="nv">lam</span> <span class="s">&quot;World&quot;</span><span class="p">)</span> <span class="c1">//&lt;= Hello, World!</span>
   <span class="p">)</span>
</code></pre></div>

<p><strong>Pipeline calling order</strong><br>
Pipeline evaluation operator has been added. It makes possible to compose functions by concatenating function calls instead of nesting. For example, suppose, we have some string as data and we want to perform a sequence of operations on this data:</p>

<ol>
<li>Split it to words;</li>
<li>Sort words in alphabetical order;</li>
<li>Print sorted words to the screen.</li>
</ol>

<p>In usual way, this data processing flow can be arranged as follows:</p>

<pre><code>(textout 
  (sort 
    (split someStr " ")))
</code></pre>

<p>The pipeline operator <code>-|</code> allows us to avoid deep nesting and to write function calls in the same order as operations follow logically:</p>

<pre><code>(-| (split someStr " ") 
    (sort) 
    (textout))
</code></pre>

<p>The necessary condition for combining function calls in this way is that the return value of a function must be admissible as an argument to the next function.</p>

<p>The inclusion of pipeline operator into language constructs, can make parentheses-grouping syntax arguably one of the most clean and clear:</p>

<p><a href="http://rosettacode.org/wiki/Anagrams#Transd">Rosetta task: Anagrams</a></p>

<p><strong>Formatted output</strong><br>
Formatting capabilities of text streams have been expanded with the following manipulators: <code>fill:, :left, :right, :internal, prec:, :fixed, :boolalpha, :noboolalpha</code>. </p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">with </span><span class="nv">pr1</span> <span class="mf">3.7</span> <span class="nv">pr2</span> <span class="mf">1.5</span>
    <span class="p">(</span><span class="nf">lout</span> <span class="nv">width</span><span class="o">:</span> <span class="mi">20</span> <span class="nv">fill</span><span class="o">:</span> <span class="s">&quot;.&quot;</span> <span class="o">:</span><span class="nv">left</span> <span class="s">&quot;Fried chicken&quot;</span> 
             <span class="nv">prec</span><span class="o">:</span> <span class="mi">2</span> <span class="o">:</span><span class="nv">fixed</span> <span class="nv">pr1</span> <span class="s">&quot; USD&quot;</span> <span class="p">)</span>
    <span class="p">(</span><span class="nf">lout</span> <span class="nv">width</span><span class="o">:</span> <span class="mi">20</span> <span class="s">&quot;Ice-cream&quot;</span> <span class="nv">pr2</span> <span class="s">&quot; USD&quot;</span> <span class="p">)</span>
    <span class="p">(</span><span class="nf">lout</span> <span class="nv">width</span><span class="o">:</span> <span class="mi">28</span> <span class="nv">fill</span><span class="o">:</span> <span class="s">&quot;-&quot;</span> <span class="p">)</span>
    <span class="p">(</span><span class="nf">lout</span> <span class="nv">width</span><span class="o">:</span> <span class="mi">20</span> <span class="nv">fill</span><span class="o">:</span> <span class="s">&quot; &quot;</span> <span class="o">:</span><span class="nv">right</span> <span class="s">&quot;Total: &quot;</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">pr1</span> <span class="nv">pr2</span><span class="p">)</span> <span class="s">&quot; USD&quot;</span> <span class="p">)</span>
 <span class="p">)</span>
</code></pre></div>

<pre><code>OUTPUT:

Fried chicken.......3.70 USD
Ice-cream...........1.50 USD
----------------------------
             Total: 5.20 USD
</code></pre>

<p><strong>Container methods</strong><br>
Another method - <code>(coincide)</code> - has been added to generic container methods. It takes two containers and returns the length of their common prefix (or postfix), that is the number of equal elements from the beginning (or the end) of the container.</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">with </span><span class="nv">v1</span> <span class="p">[</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="p">]</span> <span class="nv">v2</span> <span class="p">[</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">textout</span> <span class="p">(</span><span class="nf">coincide</span> <span class="nv">v1</span> <span class="nv">v2</span><span class="p">))</span> <span class="c1">// &lt;= 5</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="2021-nov-30-november-results">2021-Nov-30 | November results</h3>

<p><strong>Expanding data processing capabilities</strong><br>
As the core of Transd has acquired its stable long-term shape, the emphasis of development has shifted to strengthening and expanding specialized parts of the language.</p>

<p>The data processing section has been supplemented with <code>Table</code> class, and now includes the following classes:</p>

<ol>
<li><p><code>Object</code> - represents a text block of name/value pairs, treated as a single object. Such objects in Transd are called "TSD objects" ("TSD" - is short for "Transd Structured Data").</p></li>
<li><p><code>TSDBase</code> - a collection of TSD objects, which can be viewed as an ad-hoc "NoSQL" database, and which supports "SELECT" and "UPDATE" data queries.</p></li>
<li><p><code>Table</code> - a class for working with tabular data (e.g. CSV files). <code>Table</code> objects can be viewed as one-table databases, and they support "SELECT" and "UPDATE" data queries.</ol></p>

<p><strong>Performance increase</strong><br>
Some good amount of laborious optimizations and profiling has brought its positive results in the form of considerable performance gains in both low-level and high-level operations of the language. Results can be seen <a href="https://transd.org/perftest.html">here</a>.</p>

<p><strong>Portability increase</strong><br>
With the addition of Clang to the list of building tools with which Transd is built seamlessly, the portability of the language reached its, in fact, ultimate level: on both platforms Transd can be compiled using, basically, the same command:</p></li>
</ol>

<pre><code>Linux:

$ clang++ -std=c++14 -O3 src/transd.cpp src/main.cpp -D__LINUX__ -lpthread -o tree3

Windows:

PS clang++ -std=c++14 -O3 src/transd.cpp src/main.cpp -DWIN32 -o tree3
</code></pre>

<h3 id="2021-oct-31-october-results">2021-Oct-31 | October results</h3>

<p><strong>(tsd-query) : UPDATE</strong> <br>
Data query functionality has been expanded with the "UPDATE" query type. An example of using the UPDATE query can be seen here: <a href="http://rosettacode.org/wiki/Merge_and_aggregate_datasets#Transd">Merge aggregate datasets</a>.</p>

<p><strong>DateTime type</strong> <br>
Another type was added to the type system: <code>DateTime</code>. Among other uses, this type is indispensable in data processing. An example of usage is via the link in the previous paragraph.</p>

<p><strong>Example Transd program</strong>
Audio Flow Combiner, written in Transd, has reached the first level of maturity. It plays smoothly for hours most intricate and interwoven flows. The memory usage is astoundingly low (around 5 Mb of commited memory on Linux).</p>

<h3 id="2021-sep-23-afc-a-program-on-transd">2021-Sep-23 | "AFC": a program on Transd</h3>

<p>For demonstration purposes a first program on Transd has been created: "Audio Flow Combiner". This program illustrates one way of using Transd as a front-end language. Serving as a front-end for the popular and venerable "SoX" audio program, <a href="afc/AFC.html">AFC</a> can create finely grained audio flows from one or several audio files.</p>

<p>This program demonstrates many features of the language and main principles of structuring a Transd program. Its source code can be used as a tutorial in Transd programming, and as a reference for the particular task of scripting program's behaviour through the command line. The analysis of the program's source code can be found <a href="AFC_review.html">here</a>.</p>

<h3 id="2021-aug-28-tsd-objects">2021-Aug-28 | TSD objects</h3>

<p>A new <code>Object</code> type has been added to the type system. This type represents a Transd Structured Data (TSD) object: a named block of text data structured in the form of name/value pairs:</p>

<div class="codehilite"><pre><span></span><code><span class="s">&quot;order_255&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s">&quot;Orange Juice&quot;</span><span class="o">:</span> <span class="mf">0.95</span><span class="o">,</span>
    <span class="s">&quot;Lunch Herb Crusted Salmon&quot;</span><span class="o">:</span> <span class="mf">3.95</span><span class="o">,</span>
    <span class="s">&quot;Orange Chicken&quot;</span><span class="o">:</span> <span class="mf">1.95</span><span class="o">,</span>
    <span class="s">&quot;Side of French Fries&quot;</span><span class="o">:</span> <span class="mf">0.95</span><span class="o">,</span> 
    <span class="nv">total</span><span class="o">:</span> <span class="mf">7.80</span>
<span class="p">}</span>
</code></pre></div>

<p>A text file with many such objects can be processed with Transd in the following way:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">objs</span><span class="o">:</span> <span class="nb">Index&lt;String Vector&lt;Object&gt;</span><span class="o">&gt;</span><span class="p">()</span><span class="o">,</span>

<span class="p">(</span><span class="nf">rebind</span> <span class="nv">objs</span> <span class="p">(</span><span class="nf">group-by</span> 
                <span class="p">(</span><span class="nf">read-tsd-file</span> <span class="s">&quot;restaurant_orders&quot;</span><span class="p">)</span> 
                <span class="p">(</span><span class="nf">λ</span> <span class="nv">ob</span> <span class="nv">Object</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nv">String</span><span class="p">()</span> 
                    <span class="p">(</span><span class="nf">get-String</span> <span class="nv">ob</span> <span class="s">&quot;name&quot;</span><span class="p">))))</span>
</code></pre></div>

<p>And in <code>objs</code> variable we have an Index with TSD objects, addressable by name (e.g. "order_255") and ready to be placed into a TSDBase or processed in some other way.</p>

<p>What gives this feature much more power is that it can be used for initializing Transd objects with text data. </p>

<p>E.g. we have a program that defines several classes and uses objects of those classes. Then we can initialize these objects from a single text file, which can play the role of a database, advanced configuration file, etc. Our program can look like this:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">class</span> <span class="nv">ClassA</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nv">field1</span><span class="o">:</span> <span class="nv">String</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">field2</span><span class="o">:</span> <span class="nv">Int</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">meth1</span><span class="o">:</span> <span class="p">(</span><span class="k">lambda </span><span class="o">...</span> <span class="p">)</span>
<span class="p">}</span>

<span class="nv">class</span> <span class="nv">ClassB</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nv">field1</span><span class="o">:</span> <span class="nv">vector</span><span class="o">&lt;</span><span class="nb">String&gt;</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">field2</span><span class="o">:</span> <span class="nv">Double</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">meth1</span><span class="o">:</span> <span class="p">(</span><span class="k">lambda </span><span class="o">...</span> <span class="p">)</span>
<span class="p">}</span>

<span class="nv">MainModule</span><span class="o">:</span> <span class="p">{</span>
    <span class="nv">objs</span><span class="o">:</span> <span class="nb">Index&lt;String Vector&lt;Object&gt;</span><span class="o">&gt;</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">objA_1</span><span class="o">:</span> <span class="nv">ClassA</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">objA_2</span><span class="o">:</span> <span class="nv">ClassA</span><span class="p">()</span><span class="o">,</span>
    <span class="nv">objB</span><span class="o">:</span> <span class="nv">ClassB</span><span class="p">()</span><span class="o">,</span>

    <span class="nv">_start</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="nf">rebind</span> <span class="nv">objs</span> <span class="p">(</span><span class="nf">group-by</span> 
                <span class="p">(</span><span class="nf">read-tsd-file</span> <span class="s">&quot;database1&quot;</span><span class="p">)</span> 
                <span class="p">(</span><span class="nf">λ</span> <span class="nv">ob</span> <span class="nv">Object</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nv">String</span><span class="p">()</span> 
                    <span class="p">(</span><span class="nf">get-String</span> <span class="nv">ob</span> <span class="s">&quot;name&quot;</span><span class="p">))))</span>
    <span class="p">(</span><span class="nf">load-from-object</span> <span class="nv">objA_1</span> <span class="p">(</span><span class="nf">get</span> <span class="p">(</span><span class="nf">snd</span> <span class="p">(</span><span class="nf">get</span> <span class="nv">objs</span> <span class="s">&quot;objA_1&quot;</span><span class="p">))</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">load-from-object</span> <span class="nv">objA_2</span> <span class="p">(</span><span class="nf">get</span> <span class="p">(</span><span class="nf">snd</span> <span class="p">(</span><span class="nf">get</span> <span class="nv">objs</span> <span class="s">&quot;objA_2&quot;</span><span class="p">))</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">load-from-object</span> <span class="nv">objB</span> <span class="p">(</span><span class="nf">get</span> <span class="p">(</span><span class="nf">snd</span> <span class="p">(</span><span class="nf">get</span> <span class="nv">objs</span> <span class="s">&quot;objB&quot;</span><span class="p">))</span> <span class="mi">0</span><span class="p">))</span>
    <span class="o">...</span>
</code></pre></div>

<p>And the program's data file will look like this:</p>

<pre><code>"objA_1": {
    class: "ClassA",
    field1: "string1",
    field2: 25
}
"objA_2": {
    class: "ClassA",
    field1: "string2",
    field2: 37
}
"objB": {
    class: "ClassB",
    field1: ["string3", "string4", "string5"],
    field2: 14.1
}
</code></pre>

<p>Thus, with addition of TSD Object type, it's now possible in Transd to implement with minimum of code the chains "TEXT_DATA --> TSD Object --> TSDBase database". That is, with a small amount of code we can create objects of custom structures, read them in from a text file, and work with them in TSDBase in a database way: sorting, quering, selecting, etc.</p>

<h3 id="2021-jul-08-type-system">2021-Jul-08 | Type system</h3>

<p>Type system has become much closer to the production shape. All fundamental types are of fixed size now, instead of platform-dependent sizes, when <code>long int</code> on Windows was 4 bytes and on Linux - 8 bytes. Strings remain platform dependent, since <code>wchar_t</code> is irreplaceable for Unicode handling, and its size is different on Windows and Linux.</p>

<p>The built-in types are:</p>

<pre><code>Byte        - unsigned, 1 byte
Int         - signed, 4 bytes
Long        - signed, 8 bytes
ULong       - unsigned, 8 bytes
String      - UTF-16 on Windows, UTF-32 on Linux
ByteArray   - container for native (unboxed) unsigned bytes
Vector&lt;&gt;    - generic sequence container
Index&lt;&gt;     - generic associative array
HashIndex&lt;&gt; - generic hash table
</code></pre>

<p>In other news - a new Rosetta task has been implemented, where the first usage of formatted output, mentioned in the previous blog entry, can be seen (as well as the new type system features): <a href="http://rosettacode.org/wiki/AKS_test_for_primes#Transd">AKS test for primes</a></p>

<hr />

<p><br></p>

<h3 id="2021-jun-30-formatted-output">2021-Jun-30 | Formatted output</h3>

<p>As release is nearing, the design decisions that were postponed until later stages are being made. The conception of how to do the formatted output in Transd has been detalized.</p>

<p>I decided to go with the C++ model, which uses stream manipulators for output formatting, since the concept of manipulators ideally aligns with already existing Transd's markers. Manipulators define how the nearest item after them should be formatted. So, the Transd code for formatted output of, e.g., a string and a double can look like this:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">textout</span> <span class="nv">width</span><span class="o">:</span> <span class="mi">6</span> <span class="s">&quot;Pi:&quot;</span> <span class="o">:</span><span class="nv">sign</span> <span class="nv">prec</span><span class="o">:</span> <span class="mi">4</span> <span class="nv">PI</span><span class="p">)</span>
</code></pre></div>

<p>Which will produce the output:</p>

<pre><code>Pi:   +3.1416
</code></pre>

<p>This illustrates how important it is to make design decisions in their proper time. Markers appeared relatively late in the language, and if on early stages some other model were chosen for formatted output (e.g. Python's), then it certainly would not look and act so uniform with the rest of the syntax. Compare the above example with a call of 'substr' function:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">substr</span> <span class="nv">s</span> <span class="nv">from</span><span class="o">:</span> <span class="nv">after</span><span class="o">:</span> <span class="nv">last</span><span class="o">:</span> <span class="s">&quot;/&quot;</span> <span class="nv">to</span><span class="o">:</span> <span class="nv">last</span><span class="o">:</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />

<p><br></p>

<h3 id="2021-jun-23-data-processing">2021-Jun-23 | Data processing</h3>

<p>Containers received another upgrade: now Transd supports the pipeline semantics for staged data processing.</p>

<p>An example of pipelined data processing is an implementation of <a href="http://rosettacode.org/wiki/Anagrams">"Anagrams"</a> Rosetta task. The contents of an English dictionary is read to the 'words' string, then this data is passed through several stages of processing, and as a result the list of words with the maximum number of anagrams is outputted:</p>

<div class="codehilite"><pre><span></span><code><span class="o">#</span><span class="nv">lang</span> <span class="nv">transd</span>

<span class="nv">MainModule</span><span class="o">:</span> <span class="p">{</span>
    <span class="nv">_start</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> 
        <span class="p">(</span><span class="k">with </span><span class="nv">fs</span> <span class="nv">FileStream</span><span class="p">()</span> <span class="nv">words</span> <span class="nv">String</span><span class="p">()</span>
            <span class="p">(</span><span class="nf">open</span> <span class="nv">fs</span> <span class="s">&quot;/mnt/proj/tmp/unixdict.txt&quot;</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">textin</span> <span class="nv">words</span> <span class="nv">fs</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">textout</span> 
                <span class="p">(</span><span class="nf">snd</span> <span class="p">(</span><span class="nf">max-element</span>
                <span class="p">(</span><span class="nf">regroup-by</span> 
                <span class="p">(</span><span class="nf">group-by</span> 
                <span class="p">(</span><span class="nf">split</span> <span class="nv">words</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">λ</span> <span class="nv">s</span> <span class="nv">String</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nv">String</span><span class="p">()</span> <span class="p">(</span><span class="nf">sort</span> <span class="nv">s</span><span class="p">)))</span>
                    <span class="p">(</span><span class="nf">λ</span> <span class="nv">v</span> <span class="nb">Vector&lt;String&gt;</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nv">Int</span><span class="p">()</span> <span class="p">(</span><span class="nf">size</span> <span class="nv">v</span><span class="p">))))))))</span>
<span class="p">}</span>
</code></pre></div>

<p>Output:</p>

<pre><code>[[abel, able, bale, bela, elba], 
[caret, carte, cater, crate, trace], 
[angel, angle, galen, glean, lange], 
[alger, glare, lager, large, regal], 
[elan, lane, lean, lena, neal], 
[evil, levi, live, veil, vile]]

</code></pre>

<hr />

<p><br></p>

<h3 id="2021-jun-10-streams">2021-Jun-10 | Streams</h3>

<p>Transd now supports three types of streams: </p>

<p><strong>StringStream</strong> - for Unicode text data;</p>

<p><strong>ByteStream</strong> - for raw bytes;</p>

<p><strong>FileStream</strong> - file I/O.</p>

<p>All stream types work in a uniform way, support automatic conversion between strings and bytes, and can serve as source or destination for data. For example, the following call:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">textout</span> <span class="nv">to</span><span class="o">:</span> <span class="nv">MyStream</span> <span class="s">&quot;Some text&quot;</span><span class="p">)</span>
</code></pre></div>

<p>can output text to any of three stream types as well as to StdOut. For additional examples see the "Type system/Streams" folder in the test suit.</p>

<hr />

<p><br></p>

<h3 id="2021-mar-14-type-aliases">2021-Mar-14 | Type aliases</h3>

<p>Another new feature was added: type aliases. Type aliasing creates an additional name for a data type without creating a new type. It is used for simplifying the syntax of declaring complex compound types or for providing descriptive names to types in specific context.</p>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="o">#</span><span class="nv">lang</span> <span class="nv">transd</span>

<span class="nv">MainModule</span><span class="o">:</span> <span class="p">{</span>
    <span class="nv">Tuis</span> <span class="o">:</span> <span class="k">typealias(</span> <span class="nv">Tuple</span><span class="p">(</span> <span class="nv">Int</span><span class="p">()</span> <span class="nv">String</span><span class="p">()</span> <span class="p">)</span> <span class="p">)</span><span class="o">,</span>
    <span class="nv">v1</span><span class="o">:</span> <span class="nv">Vector</span><span class="p">(</span> <span class="nv">Tuis</span><span class="p">()</span> <span class="p">)</span><span class="o">,</span>
    <span class="nv">uv1</span><span class="o">:</span> <span class="p">[[</span><span class="mi">6</span><span class="o">,</span> <span class="s">&quot;a&quot;</span><span class="p">]]</span><span class="o">,</span>
    <span class="nv">uv2</span><span class="o">:</span> <span class="p">[[</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;c&quot;</span><span class="p">]]</span><span class="o">,</span>
    <span class="nv">uv3</span><span class="o">:</span> <span class="p">[[</span><span class="mi">3</span><span class="o">,</span> <span class="s">&quot;h&quot;</span><span class="p">]]</span><span class="o">,</span>
    <span class="nv">uv4</span><span class="o">:</span> <span class="p">[[</span><span class="mi">2</span><span class="o">,</span> <span class="s">&quot;e&quot;</span><span class="p">]]</span><span class="o">,</span>
    <span class="nv">_start</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="k">with </span><span class="nv">abc</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">add</span> <span class="nv">v</span> <span class="nv">uv1</span><span class="p">)</span> <span class="p">(</span><span class="nf">add</span> <span class="nv">v</span> <span class="nv">uv2</span><span class="p">)(</span><span class="nf">add</span> <span class="nv">v</span> <span class="nv">uv3</span><span class="p">)(</span><span class="nf">add</span> <span class="nv">v</span> <span class="nv">uv4</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">set</span> <span class="nv">v1</span> <span class="mi">0</span> <span class="nv">uv1</span><span class="p">)</span> <span class="p">(</span><span class="nf">set</span> <span class="nv">v1</span> <span class="mi">1</span> <span class="nv">uv2</span><span class="p">)(</span><span class="nf">set</span> <span class="nv">v1</span> <span class="mi">2</span> <span class="nv">uv3</span><span class="p">)(</span><span class="nf">set</span> <span class="nv">v1</span> <span class="mi">3</span> <span class="nv">uv4</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;v: &quot;</span> <span class="nv">v</span> <span class="s">&quot;\n&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;v1: &quot;</span> <span class="nv">v1</span> <span class="s">&quot;\n&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">textout</span> <span class="p">(</span><span class="nf">sort</span> <span class="nv">v</span> <span class="o">:</span><span class="nv">asc</span> 
            <span class="p">(</span><span class="k">lambda </span><span class="nv">l</span> <span class="nv">Tuis</span><span class="p">()</span> <span class="nv">r</span> <span class="nv">Tuis</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nv">Bool</span><span class="p">()</span>
                <span class="p">(</span><span class="nf">ret</span> <span class="p">(</span><span class="nf">less</span><span class="o">&lt;</span><span class="nb">Int&gt;</span> <span class="p">(</span><span class="nf">get</span> <span class="nv">l</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">get</span> <span class="nv">r</span> <span class="mi">0</span><span class="p">)))))</span> <span class="s">&quot;\n&quot;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

</div>
<div id="footer">
  <p>&copy; Copyright 2020 <a href='&#109;ail&#116;o&#58;alb%65rger&#64;g%6Dai&#108;&#46;&#37;63o&#109;'>Albert Berger</a> &middot; All Rights Reserved</p>
</div>
</body>
</html>
