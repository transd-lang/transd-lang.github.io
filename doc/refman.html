<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<title>TransD Programming Language Reference Manual</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="content-language" content="en-US">
<meta name="language" content="English">
<meta name="description" content="Reference manual for Transd programming language">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="../css/codehighlight.css" rel="stylesheet" type="text/css" />
<link href="../css/tsd.css" rel="stylesheet" type="text/css" />
<style>
hr {
  border-top: 1px solid #eee;
  width: 50%;
  margin: 40px auto 20px auto;
  color: #bbb;
}
body { font: 1em "Trebuchet MS", Arial, Sans-Serif; color: #444; }
	h1 { font: bold 2.0em sans-serif; color: #404040;}
	h1 a { text-decoration: none; }
	h2 { font: normal 2.0em sans-serif; color: #404040; margin: 1.5em 1em 1em auto; }
	h3 { font: bold 1.8em serif; color: #4040a0; margin: 1.5em 0 .5em; }
	h4 { font: bold 1.3em sans-serif; color: #707070; margin: 1.2em 0 1.3em; }
	h5 { font: normal 1.2em sans-serif; color: #404040; margin: 1.2em 0.5em 1.3em; }
	h6 { font: bold 1.2em sans-serif; color: #4040a0; margin: 0 0 0.5em 0; }	
	p  { margin: 0 0 1em 0; line-height: 1.5em; }
code { text-align: left; font: 1.0em Consolata, Monospace, "Courier New"; padding: 0px;
		background-color: #e8e8e8; line-height: 1.5em; }
pre { font-size: 1.0em; color: #555; padding: 10px; margin: -5px auto 15px auto;background-color: #e8e8e8; line-height: 1.5em;}

</style>
</head>
<body>
<div class="wrap">
<hr width="100%" style="margin:5px 0 35px 0;">
<h1 id="transd-reference-manual" style="margin-bottom: 0;
font-size: 3em; font-weight: normal; color: #005b56; font-family: serif;">Transd Reference Manual</h1>
<p>(Work in progress)</p>
<hr width="100%" height="1px" style="border-top: 1px solid #bbb;margin:0 0 100px 0;" color="#aaa">

<h1 id="transd-programming-language">Transd programming language</h1>

<p>Transd is a general purpose programming language, statically typed, multi-paradigm, with meta-compilation execution model. Its defining features are its novel execution model, which doesn't require the compilation to machine code, but at the same time is considerably faster than traditional interpretation technics, and, secondly, the ultimate compactness of implementation, which makes it an ideal choice for embeddable or extension language.</p>

<p><br><br></p>

<h1 id="lexical-conventions">Lexical conventions</h1>

<p>Transd source files are encoded in UTF-8. Upper and lower character cases are distinguished.</p>

<p>Source files can contain comments, which can be marked by one of two ways: </p>

<ol>
<li>Character sequence <code>//</code> (slash, slash) anywhere on a line marks the start of a comment which extends to the end of the line.</li>
<li>Character sequence <code>/*</code> (slash, asterisk) marks the start of a comment which extends to the nearest character sequence <code>*/</code> (asterisk, slash). All characters between two slashes included are replaced with one whitespace character. (For example, a sequence <code>A/*B, B*/A</code> will be treated as <code>A A</code>.</li>
</ol>

<p>Identifiers in Transd can be any string of letters, digits, and underscores, not beginning with a digit. Letter is any symbol considered alphabetic under the current locale.</p>

<p>The formal syntax of language parts in this manual is described using a variant of Backus-Naur Form (BNF) specification.</p>

<p>A BNF specification is a set of derivation rules, written as</p>

<pre><code> symbol := __expression__
</code></pre>

<p>where <code>symbol</code> is a non-terminal, and the <code>__expression__</code> consists of one or more sequences of symbols. The ":=" means that the symbol on the left must be replaced with the expression on the right. The vertical bar <code>"|"</code> separates different variants of the item. Terms in square brackets are optional; parentheses group terms into one item; asterisk means that an item can occur zero or more times; capitalized words denote terminal symbols (that is basic symbols, not parsable into smaller parts.)</p>

<p>Example:</p>

<pre><code>    module := MODULE_NAME ": {" [member] ("," member)* "}"
    member := (field | method)
    field := NAME ":" (type_constructor | value_initializer)
</code></pre>

<h2 id="source-files">Source files</h2>

<p>Transd program are defined in one or more source files. Source files should be in UTF-8 encoding. The program code in a source file should be placed after the Transd code marker:</p>

<p><code>#lang transd</code></p>

<p><br></p>

<hr />

<p><br></p>

<h1 id="modules">Modules</h1>

<p>The top syntax unit in Transd is a module. A Transd program consists of one or more modules. Module is an arbitrary block of grouped together functions and data variables, which are called <em>module members</em>. All module members within one module are visible and accessible to each other. </p>

<p>A source file can contain several modules. Conversely, a definition of a large module can be contained in several source files. Each module in the program should have a unique name.</p>

<p>The grammar of a module:</p>

<pre><code>    module := MODULE_NAME ": {" [member] ("," member)* "}"
    member := NAME ":" declarator
</code></pre>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">MainModule</span> <span class="o">:</span> <span class="p">{</span>
  <span class="nv">s</span> <span class="o">:</span> <span class="s">&quot;Hello, world!&quot;</span><span class="o">,</span>
  <span class="nv">_start</span> <span class="o">:</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">textout</span> <span class="nv">s</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="general-syntax">General syntax</h2>

<p>All the code in a Transd program is organized into modules. Modules have a very simple structure: a module is, basically, a comma separated list of module members. The syntax of module members definition is simple as well: every member is defined in the form of a name/value pair:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">Module1</span><span class="o">:</span> <span class="p">{</span>
  <span class="nv">var1</span><span class="o">:</span> <span class="mi">5</span><span class="o">,</span>
  <span class="nv">func1</span><span class="o">:</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">textout</span> <span class="nv">var1</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>

<p>Module members are of two kinds: <em>data members</em> and <em>function members</em>, which are often called <em>fields</em> and <em>methods</em> respectively. </p>

<p><br></p>

<hr />

<p><br></p>

<h1 id="variables">Variables</h1>

<p>A variable in Transd is a named reference to an object in memory. When a variable is declared, it receives a type, and it can only refer to objects of that type.</p>

<p>By their lifetime variables in Transd are divided into two kinds:</p>

<ol>
<li>Module members (<em>fields</em>). </li>
<li>Function local (<em>scoped</em>) variables.</li>
</ol>

<h2 id="module-fields">Module fields</h2>

<h3 id="declaration">Declaration</h3>

<p>Module fields are declared as a part of module definition:</p>

<p>The declaration of a field can in certain cases be used as a place for the field's initialization (that is for assigning a value to the field). These cases are limited to the following:</p>

<ol>
<li>Initializing the field with a literal value.</li>
<li>Initializing the field with a special type constructor, which performs initialization without using references to other functions or variables outside of it.</li>
</ol>

<p>The syntax for a module field declaration is as follows:</p>

<pre><code>    field := NAME ":" (type_constructor | value_initializer)
</code></pre>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">Module1</span><span class="o">:</span> <span class="p">{</span>
  <span class="nv">s</span><span class="o">:</span>  <span class="nv">String</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">s1</span><span class="o">:</span> <span class="nv">String</span><span class="p">(</span><span class="s">&quot;some string&quot;</span><span class="p">)</span><span class="o">,</span>
  <span class="nv">v</span><span class="o">:</span>  <span class="nb">Vector&lt;Int&gt;</span><span class="p">(</span> <span class="mi">10</span> <span class="p">)</span><span class="o">,</span>
  <span class="nv">v1</span><span class="o">:</span> <span class="nb">Vector&lt;Int&gt;</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>In the example above, the <code>s</code> and <code>s1</code> fields are declared as Strings and <code>s1</code> is initialized with "some string" value. The <code>v</code> and <code>v1</code> fields are declared as Vectors of integers. <code>v</code> is initialized with a special type constructor which fills it with 10 integers having the default (zero) value. <code>v1</code> vector is filled with 3 integers, which have values <code>1</code>, <code>2</code> and <code>3</code>.</p>

<p>This example uses explicit type constructors for all four fields. When a type allows initializing with a literal value, and the field type can be inferred from the literal, then a short form of initialization can be used (called <em>value initialization</em>):</p>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">Module1</span><span class="o">:</span> <span class="p">{</span>
  <span class="nv">s1</span><span class="o">:</span> <span class="s">&quot;some string&quot;</span><span class="o">,</span> <span class="c1">// &#39;s1&#39; becomes a String with &quot;some string&quot; value</span>
  <span class="nv">v1</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="p">]</span>  <span class="c1">// &#39;v&#39; becomes a Vector&lt;Int&gt; filled with &#39;1&#39;, &#39;2&#39;, &#39;3&#39; integers.</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="visibility-and-access">Visibility and access</h3>

<p>Module fields by default are only visible within the module in which the field is defined. For allowing access to a field from other modules, that field must be declared as public.</p>

<h3 id="life-time">Life time</h3>

<h2 id="local-variables">Local variables</h2>

<p>Local variables in functions are introduced with the <code>(with ...)</code> construction. They
are only visible inside that construction.</p>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">someFunc</span> <span class="o">:</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="k">with </span><span class="nv">a</span> <span class="mi">1</span> <span class="nv">b</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">textout</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">a</span> <span class="nv">b</span><span class="p">))))</span> <span class="c1">// outputs &quot;3&quot;</span>
</code></pre></div>

<p><br></p>

<hr />

<p><br></p>

<h1 id="forms">Forms</h1>

<p>An expression is a piece of code which can be evaluated as a single whole and whose data value can be obtained. Expressions consist of expression members called <em>constituents</em>. All expressions in Transd are enclosed in parentheses and have a similar structure resembling a function call: the first constituent always names the operation performed by the expression, and the remaining constituents are parameters to that operation. Such parenthesized  construction in Transd is called <em>form</em>. The first constituent of a form is called the form's <em>subject</em>. Forms can contain other forms as constituents.</p>

<p>Examples of forms:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">== </span><span class="p">(</span><span class="nb">+ </span><span class="mi">3</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="mi">4</span><span class="p">))</span>
<span class="p">(</span><span class="nf">computeDistance</span> <span class="nv">Point</span><span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">Point</span><span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
<span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;five plus three equals&quot;</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">5</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">(</span><span class="nf">sqrt</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">pow</span> <span class="p">(</span><span class="nb">- </span><span class="nv">x1</span> <span class="nv">x2</span><span class="p">)</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">(</span><span class="nf">pow</span> <span class="p">(</span><span class="nb">- </span><span class="nv">y1</span> <span class="nv">y2</span><span class="p">)</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">)</span>
</code></pre></div>

<p><br></p>

<hr />

<p><br></p>

<h1 id="functions">Functions</h1>

<p>Forms are syntactical constructs for function objects. For simplicity, we will refer as function to any object that can be invoked (called) with or without arguments, in order to obtain some value from that object or to have it to perform some action. </p>

<p>In Transd there are two kinds of function objects: a function definition and a function call. In source code the syntax for these objects looks similar, and for the purpose of distinguishing between the two, the function definition objects have as their first constituent the <code>lambda</code> keyword (for brevity, instead of this keyword, one can use the symbol 'λ' (Greek letter "lambda", Unicode symbol 955 (0x3BB)).</p>

<p>These two function definitions are equivalent:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">func1</span><span class="o">:</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;Hello, world!&quot;</span><span class="p">))</span><span class="o">,</span>

<span class="nv">func2</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;Hello, world!&quot;</span><span class="p">))</span>
</code></pre></div>

<p>The second type of function object - a function call - is any form that doesn't contain the <code>lambda</code> keyword as the first participant. In the examples above, <code>(textout "abc")</code> is a function call. That is, the definition of the <code>func1</code> function, consists of a single call to a built-in <code>textout</code> function with the string "Hello, world!" as a parameter. This function definition is equivalent to, for example, Python's:</p>

<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">)</span>
</code></pre></div>

<p>There are two kinds of function calls in Transd: method calls and routine calls. </p>

<p>A method call is an invocation of a member function of some object:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">append</span> <span class="nv">vec1</span> <span class="mi">25</span><span class="p">)</span> <span class="c1">// append an integer &#39;25&#39; to the end of &#39;vec1&#39; vector object</span>
<span class="p">(</span><span class="nb">+ </span><span class="mi">5</span> <span class="mi">7</span><span class="p">)</span> <span class="c1">// add 7 to 5</span>
</code></pre></div>

<p>The first method call above invokes the <code>append</code> method of a built-in <em>Vector</em> type on the <code>vec1</code> object of that type with passing <code>25</code> as an argument. The second one, invokes the <code>+</code> method of a built-in <em>Int</em> type on the <code>5</code> object of that type with passing <code>7</code> as an argument. This illustrates the syntactic rule: all method calls must have the object whose method is invoked as their first argument. This first argument in the context of the call is refered to as <em>subject</em> in Transd documentation.</p>

<p>A subject can be passed as an expression that returns an object whose method is invoked:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">+ </span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">7</span><span class="p">)</span> <span class="c1">// add 7 to the result of (+ 2 3)</span>
</code></pre></div>

<p>A routine call is an invocation of a function that is not a member of some class:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;5 + 7 = &quot;</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">5</span> <span class="mi">7</span><span class="p">))</span> <span class="c1">// outputs: &quot;5 + 7 = 12&quot;</span>
<span class="p">(</span><span class="nf">textout</span> <span class="mi">5</span> <span class="s">&quot; plus &quot;</span> <span class="mi">7</span> <span class="s">&quot; equals &quot;</span> <span class="p">(</span><span class="nf">sqrt</span> <span class="mi">144</span><span class="p">))</span> 
<span class="c1">// outputs: &quot;5 plus 7 equals 12&quot;</span>
</code></pre></div>

<p>Routines are not associated to some object and don't have a subject in their call syntax.</p>

<p><br></p>

<hr />

<p><br></p>

<h1 id="classes">Classes</h1>

<p><em>Classes</em> are templates for creating objects. A template is a list of data variables, which represent some kind of things, for example a database record storing information about an employee:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">class</span> <span class="nv">Employee</span> <span class="o">:</span> <span class="p">{</span>
  <span class="nv">id</span><span class="o">:</span> <span class="nv">Int</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">name</span><span class="o">:</span> <span class="nv">String</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">department</span><span class="o">:</span> <span class="nv">String</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">salary</span><span class="o">:</span> <span class="nv">Int</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Along with the list of data variables classes usually contain a list of functions which know how to operate on that data. For example, a class representing a point on a geometrical plane might have a function for computing the distance to some other point:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">class</span> <span class="nv">Point</span> <span class="o">:</span> <span class="p">{</span>
  <span class="nv">x</span><span class="o">:</span> <span class="nv">Double</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">y</span><span class="o">:</span> <span class="nv">Double</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">distance</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="nv">pt</span> <span class="nv">Point</span><span class="p">()</span>
               <span class="p">(</span><span class="nf">sqrt</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">pow</span> <span class="p">(</span><span class="nb">- </span><span class="nv">x</span> <span class="nv">pt</span><span class="o">.</span><span class="nv">x</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">pow</span> <span class="p">(</span><span class="nb">- </span><span class="nv">y</span> <span class="nv">pt</span><span class="o">.</span><span class="nv">y</span><span class="p">)</span> <span class="mi">2</span><span class="p">))))</span>
<span class="p">}</span>
</code></pre></div>

<p>As one can see, classes have the same syntax as modules: they both are lists of functions and variables. The difference between modules and classes is that modules exist strictly in single number: you cannot have a copy of a module. Whereas you can have as many different copies of an object of some class as you want. This is why classes are called templates. When you create a copy of a template, it is said that you <em>instantiate</em> the class, that is create an instance object of that class. </p>

<p>All instance objects of a class are independent from each other: when you change the values of data variables of some objects, this doesn't affect variables of other objects.</p>

<p>Classes, in fact, are types of objects, and are similar to built-in types such as <code>String</code> or <code>Vector</code>. You instantiate a class by declaring a variable of that class in the same way as you declare variables of built-in types:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">i</span><span class="o">:</span> <span class="nv">Int</span><span class="p">()</span><span class="o">,</span>
<span class="nv">str</span><span class="o">:</span> <span class="nv">String</span><span class="p">()</span><span class="o">,</span>
<span class="nv">pt</span><span class="o">:</span> <span class="nv">Point</span><span class="p">()</span><span class="o">,</span>
<span class="nv">record</span><span class="o">:</span> <span class="nv">Employee</span><span class="p">()</span>
</code></pre></div>

<h2 id="initialization-of-class-objects">Initialization of class objects</h2>

<p>Classes can have an <code>init</code> method, which is automatically called when a class instance object is created. This method can receive arguments that can be used for setting the values of the object's fields.</p>

<div class="codehilite"><pre><span></span><code><span class="nv">class</span> <span class="nv">Point</span> <span class="o">:</span> <span class="p">{</span>
  <span class="nv">x</span><span class="o">:</span> <span class="nv">Double</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">y</span><span class="o">:</span> <span class="nv">Double</span><span class="p">()</span><span class="o">,</span>
  <span class="nv">init</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="nv">x_</span> <span class="nv">Double</span><span class="p">()</span> <span class="nv">y_</span> <span class="nv">Double</span><span class="p">()</span> <span class="p">(</span><span class="nb">= </span><span class="nv">x</span> <span class="nv">x_</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">y</span> <span class="nv">y_</span><span class="p">))</span>
<span class="p">}</span>

<span class="nv">pt</span><span class="o">:</span> <span class="nv">Point</span><span class="p">(</span> <span class="mf">2.71</span> <span class="mf">3.14</span> <span class="p">)</span>
</code></pre></div>

<p><br></p>

<hr />

<p><br></p>

<h1 id="type-system">Type system</h1>

<h2 id="overview-of-transd-type-system">Overview of Transd type system</h2>

<p>Transd is strongly typed and its type system offers a variety of types to choose from for a particular programming task. Each type in Transd iѕ either <em>basic</em> or <em>compound</em>, and either <em>simple</em> or <em>container</em>. Within these categories Transd types are organized as follows:</p>

<pre><code>                     Types
                    /     \
               Basic       Compound
              /     \       /      \
        Simple  Containers Simple  Containers
</code></pre>

<p><strong>Basic types</strong> are: <code>Bool</code>, <code>Byte</code>, <code>Char</code>, <code>Int</code>, <code>Long</code>, <code>ULong</code>, <code>Double</code>, <code>String</code>, <code>ByteArray</code>.</p>

<p>Among basic types, <code>String</code> and <code>ByteArray</code> are containers, others - are simple types.</p>

<p>Compound types take an additional type parameter for their instantiation. For example, a vector of integers is declared as <code>Vector&lt;Int&gt;</code>. Such vector can only contain <code>Int</code>s, that is the "Int" type parameter becomes a part of the definition of the whole type. This is why such types are called "compound". Compound types are also refered to as generic types, or <em>generics</em>.</p>

<p><strong>Compound types</strong> are: <code>Position</code>, <code>Tuple</code>, <code>Vector</code>, <code>Index</code>, <code>HashIndex</code>.</p>

<p><code>Position</code> is a simple type, all other compound types are containers.</p>

<h2 id="type-traits">Type traits</h2>

<p>Each type in Transd has a set of properies associated with it. These properties are called <em>type traits</em>. Type traits are used for organizing types into a hierarchy and grouping together similar types. Such grouping makes possible polymorphic use of types.</p>

<p>For example, types <code>Double</code> and <code>Int</code> both have the <code>:Number</code> property. If some function can accept both <code>Double</code> and <code>Int</code> as a parameter, then instead of writing two overloaded versions of the function, it's possible to use the <code>:Number</code> type property as the parameter type.</p>

<p>For example, a function receiving a number and returning the integral part of that number can be defined as follows:</p>

<div class="codehilite"><pre><span></span><code><span class="o">#</span><span class="nv">lang</span> <span class="nv">transd</span>

<span class="nv">MainModule</span><span class="o">:</span> <span class="p">{</span>
<span class="nv">i</span><span class="o">:</span> <span class="nv">Int</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">,</span>
<span class="nv">d</span><span class="o">:</span> <span class="nv">Double</span><span class="p">(</span><span class="mf">5.5</span><span class="p">)</span><span class="o">,</span>
<span class="nv">s</span><span class="o">:</span> <span class="nv">String</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">)</span><span class="o">,</span>

<span class="nv">intgr</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="nv">n</span> <span class="o">:</span><span class="nv">Number</span><span class="p">()</span> <span class="p">(</span><span class="nf">ret</span> <span class="p">(</span><span class="nf">to-Int</span> <span class="nv">n</span><span class="p">)))</span><span class="o">,</span>

<span class="nv">_start</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">intgr</span> <span class="nv">i</span><span class="p">))</span> <span class="c1">// =&gt; 5</span>
           <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">intgr</span> <span class="nv">d</span><span class="p">))</span> <span class="c1">// =&gt; 5</span>
           <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">intgr</span> <span class="nv">s</span><span class="p">))</span> <span class="c1">// compilation error!</span>
<span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="built-in-types">Built-in types</h2>

<h3 id="null">Null</h3>

<p><code>Null</code> - is a special kind of type, which no object can have except of the special “null object”. This object may be used as a placeholder indicating absence of useful value, as the return type of functions that don't return any objects, for error signalling, etc.</p>

<h3 id="bool">Bool</h3>

<p><code>Bool</code> - the Bool type is used for storing logical truth values. The objects of this type can only have two values that are represented by keywords <code>true</code> and <code>false</code>. </p>

<p>Other types are implicitly convertible to Bool type. The simple types with value <code>0</code> and containers with zero length (empty) are converted to <code>false</code>, all other values are converted to <code>true</code>.</p>

<h3 id="byte">Byte</h3>

<p><code>Byte</code> - 8-bit unsigned integer.</p>

<p><strong>Values range:</strong> 0 - 255</p>

<p><strong>Type constructor:</strong></p>

<p><code>Byte( :Integer )</code></p>

<p><code>Byte</code> type has a polymorphic constructor, which accepts any integer as an initialization value, performing the automatic casting if needed.</p>

<h3 id="char">Char</h3>

<p><code>Char</code> - a type that represents a Unicode character: a Unicode code point encoded in UTF-16/32.</p>

<p><code>Char</code> is the only Transd type that has a platform-dependent size. </p>

<p>On Linux, <code>Char</code> is 4-byte wide and uses UTF-32 encoding. On Windows, <code>Char</code> is 2-byte wide and uses UTF-16LE encoding.
<br></p>

<h3 id="integral-numeric-types">Integral numeric types</h3>

<p>Integral numeric types represent integer numbers. Transd has the following integral numeric types: <code>Byte</code>, <code>Int</code>, <code>Long</code>, <code>ULong</code>.</p>

<pre><code>Type       Values range                      Size         Signed
-------------------------------------------------------------------

Byte       0 to 255                          1 byte       unsigned

Int        -2,147,483,648 to                 4 bytes      signed
           2,147,483,647

Long       -9,223,372,036,854,775,808 to     8 bytes      signed
           9,223,372,036,854,775,807

ULong      0 to 18,446,744,073,709,551,615   8 bytes      unsigned
</code></pre>

<h3 id="double">Double</h3>

<p><code>Double</code> - is double precision 64-bit IEEE 754 floating point type.</p>

<h3 id="string">String</h3>

<p><code>String</code> - is a container type that represents text string: it stores a sequence of Unicode characters (code points). This type is optimized for manipulating text-like data. Apart from supporting generic container operations, <code>String</code> supports a set of methods specific to manipulating text strings.</p>

<p>Below is the list of the String class methods. <em>subj</em> in the parameter list is the String object on which the method is called.</p>

<h4 id="string-constructor">String constructor</h4>

<p><code>String( [str]* )</code><br>
Parameters:<br>
<em>str</em> - any object evaluating to <code>String</code>.</p>

<p><code>str</code> can be a string variable, string literal or an expression returning a String. Any number of space separated objects can be passed to the constructor. The new string is the concatenation of all arguments. If no arguments is given, the new string is empty string.</p>

<p>Examples:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">str1</span> <span class="o">:</span> <span class="nv">String</span><span class="p">()</span><span class="o">,</span>
<span class="nv">str2</span> <span class="o">:</span> <span class="nv">String</span><span class="p">(</span><span class="s">&quot;Hello!&quot;</span><span class="p">)</span>
</code></pre></div>

<h4 id="value-initializer">Value initializer</h4>

<p>A String variable can be initialized with a string literal.</p>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">str3</span> <span class="o">:</span> <span class="s">&quot;Hello!&quot;</span>
</code></pre></div>

<h4 id="string-methods">String methods</h4>

<p>Methods of <code>String</code> class include:</p>

<ul>
<li>general containers' methods, such as <code>(size)</code> or <code>(clear)</code>;</li>
<li>sequence containers' methods, such as <code>(sort)</code> or <code>(reverse)</code>;</li>
<li><code>String</code>'s own methods, such as text manipulation routines.</li>
</ul>

<h5 id="string-container-methods">String container methods</h5>

<h6 id="clear">clear</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">clear</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Null</code></p>

<p>Discards the string's contents and makes it empty.</p>

<h6 id="eq">eq</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">eq</span> <span class="nv">subj</span> <span class="nv">str</span><span class="p">)</span>
 <span class="nv">or</span>
<span class="p">(</span><span class="nb">== </span><span class="nv">subj</span> <span class="nv">str</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>str</em> : <code>String</code><br>
Return type: <code>Bool</code></p>

<p>Compares two strings: <em>subj</em> and <em>str</em>. Returns <code>true</code> if code point sequences in both strings are identical. Otherwise, returns <code>false</code>.</p>

<h6 id="set">set</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">set</span> <span class="nv">subj</span> <span class="nv">str</span><span class="p">)</span>
 <span class="nv">or</span>
<span class="p">(</span><span class="nb">= </span><span class="nv">subj</span> <span class="nv">str</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>str</em> : <code>String</code><br>
Return type: <code>Null</code></p>

<p>Assigns the value <em>str</em> to <em>subj</em>.</p>

<h6 id="size">size</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">size</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Int</code></p>

<p>Returns the length of the string as the number of code points.</p>

<h5 id="string-sequence-container-methods">String sequence container methods</h5>

<h6 id="back">back</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">back</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Char</code></p>

<p>Returns the last character of non-empty <em>subj</em>. If <em>subj</em> is empty, an exception will be thrown.</p>

<h6 id="begin">begin</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">begin</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Position</code></p>

<p>Returns a <code>Position</code> object for the first character of <em>subj</em>. If <em>subj</em> is empty, the function returns the <code>end</code> position.</p>

<h6 id="coincide">coincide</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">coincide</span> <span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>other</em> : <code>String</code> - string.<br>
Return type: <code>Int</code></p>

<p>Returns the number of characters from the beginning that are identical in both strings. That is, the length of the prefix, if any, that is common to both strings. A backward Range as one or both of the parameters causes the function to compare characters from the end of that parameter:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">coincide</span> <span class="s">&quot;abcpqrs&quot;</span> <span class="nv">Range</span><span class="p">(</span><span class="nf">in</span><span class="o">:</span> <span class="s">&quot;wxyzcba&quot;</span> <span class="mi">-0</span> <span class="mi">0</span><span class="p">))</span> <span class="c1">// returns: 3</span>
</code></pre></div>

<h6 id="end">end</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">end</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Position</code></p>

<p>Returns a <code>Position</code> object denoting the end of <em>subj</em>'s character sequence. The <code>end</code> position is the position just after the last character. In an empty string the <code>begin</code> position is equal to the <code>end</code> position.</p>

<h6 id="front">front</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">front</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Char</code></p>

<p>Returns the first character of non-empty <em>subj</em>. If <em>subj</em> is empty, an exception will be thrown.</p>

<h6 id="reverse">reverse</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reverse</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>String</code></p>

<p>Reverses the character order in <em>subj</em>. That is "abc" is transformed to "cba". The function returns the reference to the transformed <em>subj</em>.</p>

<h6 id="shuffle">shuffle</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">shuffle</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>String</code></p>

<p>Randomly permutates the characters in <em>subj</em> and returns the reference to it.</p>

<h6 id="sort">sort</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">sort</span> <span class="nv">subj</span> <span class="p">[</span><span class="nv">cmpFunc</span><span class="p">])</span>
</code></pre></div>

<p>Parameters:<br>
<em>cmpFunc</em> : <code>Lambda</code> - (optional) comparison predicate function.<br>
Return type: <code>String</code></p>

<p>Sorts a string. That is, arranges the string's code points in ascending or descending order according to some comparison function. The default comparison function compares the numeric values of code points. The reversed sorting order is achieved by using a reversed Range as the function's subject:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">s</span><span class="o">:</span> <span class="s">&quot;bcaed&quot;</span><span class="o">,</span>
<span class="nv">f</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">sort</span> <span class="nv">Range</span><span class="p">(</span><span class="nf">in</span><span class="o">:</span> <span class="nv">s</span> <span class="mi">-0</span> <span class="mi">0</span><span class="p">))))</span> <span class="c1">// &quot;edcba&quot;</span>
</code></pre></div>

<h5 id="string-specific-methods">String specific methods</h5>

<h6 id="find-first-not-of">find-first-not-of</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">find-first-not-of</span> <span class="nv">subj</span> <span class="nv">str</span> <span class="p">[</span><span class="nv">pos</span><span class="p">])</span>
</code></pre></div>

<p>Parameters:<br>
<em>str</em> : <code>String</code> - a list of characters.<br>
<em>pos</em> : <code>:Integer</code> - (default: 0) character index in <em>subj</em> to start search from.<br>
Return type: <code>Int</code></p>

<p>Returns the index of the first character in <em>subj</em>, not contained in <em>str</em>. If no such character was found, the returned value is -1.</p>

<h6 id="read">read</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">read</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Reads a string from <code>StdIn</code> to <em>subj</em>.</p>

<h6 id="starts-with">starts-with</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">starts-with</span> <span class="nv">subj</span> <span class="nv">str</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>str</em> : <code>String</code> - string.<br>
Return type: <code>Bool</code></p>

<p>Returns <code>true</code> if <em>subj</em> contains <em>str</em> as a substring starting from the first character. Otherwise, returns <code>false</code>.</p>

<h6 id="tolower">tolower</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">tolower</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Converts all letters in the string to lower case.</p>

<h6 id="toupper">toupper</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">toupper</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Converts all letters in the string to upper case.</p>

<h4 id="string-examples">String examples</h4>

<p><strong>read</strong></p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">with </span><span class="nv">s</span> <span class="nv">String</span><span class="p">()</span>
  <span class="p">(</span><span class="nf">read</span> <span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;The input was:&quot;</span> <span class="nv">s</span><span class="p">))</span>
</code></pre></div>

<p><strong>set</strong>, <em>eq</em></p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">with </span><span class="nv">s</span> <span class="s">&quot;&quot;</span> <span class="nv">s1</span> <span class="s">&quot;&quot;</span> <span class="nv">s2</span> <span class="s">&quot;abcd&quot;</span>
   <span class="p">(</span><span class="nf">set</span> <span class="nv">s</span> <span class="s">&quot;abcd&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">s1</span> <span class="nv">s2</span><span class="p">)</span> <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">s</span> <span class="nv">s1</span><span class="p">)</span> <span class="p">(</span><span class="nb">== </span><span class="nv">s</span> <span class="nv">s2</span><span class="p">)))</span>
<span class="c1">// Output: true true</span>
</code></pre></div>

<hr />

<h3 id="bytearray">ByteArray</h3>

<p>ByteArray is a sequence container type specialized for storing 8-bit unsigned integers. This container operates on the same underlying values as <code>Vector&lt;Byte&gt;</code>, but ByteArray uses raw memory bytes as its elements, and is considerably faster and uses less memory than <code>Vector&lt;Byte&gt;</code>. Such operations as reading and writing from/to files use ByteArray as the container for file contents' bytes.</p>

<h4 id="bytearray-constructors">ByteArray constructors</h4>

<p><code>1. ByteArray()</code><br>
<code>2. ByteArray( size )</code><br>
<code>3. ByteArray( &lt;value_initializer&gt; )</code><br>
Parameters:<br>
<em>size</em> : <code>Int</code> - the initial size of the array;<br>
<em>value_initializer</em> - a list of values to put into the array.</p>

<p>1 - creates an empty array;<br>
2 - creates an array of the specified size, filled with elements whose value is <code>0</code>;<br>
3 - creates an array filled with the specified elements. <code>&lt;value_initializer&gt;</code> parameter is a comma separated, square bracket enclosed list of integers with values from 0 to 255 inclusively:</p>

<div class="codehilite"><pre><span></span><code>value_initializer <span class="o">::=</span> &quot;[&quot; [n,]* n &quot;]&quot;
</code></pre></div>

<p>Examples:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">arr1</span> <span class="o">:</span> <span class="nv">ByteArray</span><span class="p">()</span><span class="o">,</span>
<span class="nv">arr2</span> <span class="o">:</span> <span class="nv">ByteArray</span><span class="p">(</span> <span class="mi">5</span> <span class="p">)</span><span class="o">,</span>
<span class="nv">arr3</span> <span class="o">:</span> <span class="nv">ByteArray</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="p">]</span> <span class="p">)</span> 
</code></pre></div>

<h4 id="bytearray-methods">ByteArray methods</h4>

<p>Methods of <code>ByteArray</code> class include:</p>

<ul>
<li>general containers' methods, such as <code>(size)</code> or <code>(clear)</code>;</li>
<li>sequence containers' methods, such as <code>(sort)</code> or <code>(reverse)</code>;</li>
</ul>

<h5 id="bytearray-container-methods">ByteArray container methods</h5>

<h6 id="clear-2">clear</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">clear</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Null</code></p>

<p>Erases all elements of an array and makes it empty.</p>

<h6 id="eq-2">eq</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">eq</span> <span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
 <span class="nv">or</span>
<span class="p">(</span><span class="nb">== </span><span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>other</em> : <code>ByteArray</code><br>
Return type: <code>Bool</code></p>

<p>Compares two arrays: <em>subj</em> and <em>other</em>. Returns <code>true</code> if all elements and their order in both arrays are identical. Otherwise, returns <code>false</code>.</p>

<h6 id="set-2">set</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">set</span> <span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
 <span class="nv">or</span>
<span class="p">(</span><span class="nb">= </span><span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>other</em> : <code>ByteArray</code><br>
Return type: <code>Null</code></p>

<p>Copies all elements of <em>other</em> to <em>subj</em>.</p>

<h6 id="size-2">size</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">size</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Int</code></p>

<p>Returns the number of elements in the array.</p>

<h5 id="sequence-container-methods">Sequence container methods</h5>

<h6 id="back-2">back</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">back</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Byte</code></p>

<p>Returns the last element of non-empty <em>subj</em>. If <em>subj</em> is empty, an exception will be thrown.</p>

<h6 id="begin-2">begin</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">begin</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Position</code></p>

<p>Returns a <code>Position</code> object for the first element of <em>subj</em>. If <em>subj</em> is empty, the function returns the <code>end</code> position.</p>

<h6 id="end-2">end</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">end</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Position</code></p>

<p>Returns a <code>Position</code> object denoting the end of <em>subj</em>'s byte sequence. The <code>end</code> position is the position just after the last element. In an empty string the <code>begin</code> position is equal to the <code>end</code> position.</p>

<h6 id="front-2">front</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">front</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Byte</code></p>

<p>Returns the first element of non-empty <em>subj</em>. If <em>subj</em> is empty, an exception will be thrown.</p>

<h6 id="reverse-2">reverse</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reverse</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>ByteArray</code></p>

<p>Reverses the element order in <em>subj</em>. That is, an array '[1,2,3]' is transformed to '[3,2,1]'. The function returns the reference to the transformed <em>subj</em>.</p>

<h6 id="shuffle-2">shuffle</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">shuffle</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>ByteArray</code></p>

<p>Randomly permutates the characters in <em>subj</em> and returns the reference to it.</p>

<h6 id="sort-2">sort</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">sort</span> <span class="nv">subj</span> <span class="p">[</span><span class="nv">cmpFunc</span><span class="p">])</span>
</code></pre></div>

<p>Parameters:<br>
<em>cmpFunc</em> : <code>Lambda</code> - (optional) comparison predicate function.<br>
Return type: <code>ByteArray</code></p>

<p>Sorts a byte array. That is, arranges the array's elements in ascending or descending order according to some comparison function. The default comparison function compares the numeric values of byte elements. The reversed sorting order is achieved by using a reversed Range as the function's subject:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">arr</span><span class="o">:</span> <span class="nv">ByteArray</span><span class="p">([</span><span class="mi">2</span><span class="o">,</span><span class="mi">15</span><span class="o">,</span><span class="mi">9</span><span class="o">,</span><span class="mi">11</span><span class="o">,</span><span class="mi">4</span><span class="p">])</span><span class="o">,</span>
<span class="nv">f</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">sort</span> <span class="nv">Range</span><span class="p">(</span><span class="nf">in</span><span class="o">:</span> <span class="nv">arr</span> <span class="mi">-0</span> <span class="mi">0</span><span class="p">))))</span> <span class="c1">// [15,11,9,4,2]</span>
</code></pre></div>

<hr />

<h3 id="vector">Vector</h3>

<p>Vector is a container in which elements are stored as a linear sequence. Unlike ByteArray and String containers, which are specialized to store only a single type of elements: bytes and chars respectively, Vector containers can store various types - integers, strings, objects of custom types, etc., - which is why Vector in Transd is termed as a <em>generic</em> container.</p>

<p>Vectors in Transd are strongly typed: all elements in a vector must be of one and the same type. The type of elements which are to be stored in the vector is specified in the vector declaration statement within angle brackets:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">vec1</span><span class="o">:</span> <span class="nb">Vector&lt;Int&gt;</span><span class="p">()</span> <span class="c1">// Vector of Int&#39;s</span>
<span class="nv">vec2</span><span class="o">:</span> <span class="nb">Vector&lt;</span><span class="nv">Record</span><span class="o">&gt;</span><span class="p">()</span> <span class="c1">// Vector of objects a custom &#39;Record&#39; class</span>
<span class="nv">vec3</span><span class="o">:</span> <span class="nb">Vector&lt;Tuple&lt;String Int&gt;</span><span class="o">&gt;</span><span class="p">()</span> <span class="c1">// Vector of &#39;Tuple&lt;String Int&gt;&#39; tuples</span>
</code></pre></div>

<h4 id="vector-constructors">Vector constructors</h4>

<p><code>1. Vector&lt;TYPE&gt;()</code><br>
<code>2. Vector&lt;TYPE&gt;( size )</code><br>
<code>3. Vector&lt;TYPE&gt;( &lt;value_initializer&gt; )</code><br>
Parameters:<br>
<code>TYPE</code> - the type of elements which will be stored in the vector;<br>
<em>size</em>:<code>Int</code> - the initial size of the vector;<br>
<em>value_initializer</em> - a list of values to put into the array.</p>

<p>1 - creates an empty vector;<br>
2 - creates a vector of the specified size, filled with default valued elements;<br>
3 - creates a vector filled with the specified elements. <code>&lt;value_initializer&gt;</code> parameter is a comma separated, square bracket enclosed list of value initializers of vector elements (if their type permits the value initialization).</p>

<p>Examples:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">vec1</span><span class="o">:</span> <span class="nb">Vector&lt;Double&gt;</span><span class="p">()</span><span class="o">,</span>
<span class="nv">vec2</span><span class="o">:</span> <span class="nb">Vector&lt;Byte&gt;</span><span class="p">(</span> <span class="mi">100</span> <span class="p">)</span><span class="o">,</span>
<span class="nv">vec3</span><span class="o">:</span> <span class="nb">Vector&lt;Int&gt;</span><span class="p">([</span><span class="mi">-2</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">-15</span><span class="o">,</span> <span class="mi">26</span><span class="p">])</span><span class="o">,</span>
<span class="nv">vec4</span><span class="o">:</span> <span class="nb">Vector&lt;String&gt;</span><span class="p">([</span><span class="s">&quot;one&quot;</span><span class="o">,</span> <span class="s">&quot;two&quot;</span><span class="o">,</span> <span class="s">&quot;three&quot;</span><span class="p">])</span><span class="o">,</span>
<span class="nv">vec5</span><span class="o">:</span> <span class="nb">Vector&lt;Tuple&lt;String Int&gt;</span><span class="o">&gt;</span><span class="p">([[[</span><span class="s">&quot;one&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="p">]]</span><span class="o">,</span> <span class="p">[[</span><span class="s">&quot;two&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="p">]]</span><span class="o">,</span> <span class="p">[[</span><span class="s">&quot;three&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="p">]]])</span>
</code></pre></div>

<h4 id="value-initializer-2">Value initializer</h4>

<p>A Vector object can be created using a value initializer, inferring the element type automatically.</p>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">fruits</span><span class="o">:</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="o">,</span> <span class="s">&quot;water melon&quot;</span><span class="o">,</span> <span class="s">&quot;apple&quot;</span><span class="p">]</span> <span class="c1">// creates Vector&lt;String&gt;</span>
</code></pre></div>

<h4 id="vector-methods">Vector methods</h4>

<p>Methods of <code>Vector</code> class include:</p>

<ul>
<li>general containers' methods, such as <code>(size)</code> or <code>(clear)</code>;</li>
<li>sequence containers' methods, such as <code>(sort)</code> or <code>(reverse)</code>;</li>
</ul>

<h5 id="vector-container-methods">Vector container methods</h5>

<h6 id="clear-3">clear</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">clear</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Null</code></p>

<p>Discards the vector's contents and makes it empty.</p>

<h6 id="eq-3">eq</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">eq</span> <span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
 <span class="nv">or</span>
<span class="p">(</span><span class="nb">== </span><span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>other</em> : <code>Vector&lt;TYPE&gt;</code><br>
Return type: <code>Bool</code></p>

<p>Compares two vectors: <em>subj</em> and <em>other</em>. Returns <code>true</code> if all elements and their order in both vectors are identical. Otherwise, returns <code>false</code>.</p>

<h6 id="set-3">set</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">set</span> <span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
 <span class="nv">or</span>
<span class="p">(</span><span class="nb">= </span><span class="nv">subj</span> <span class="nv">other</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>other</em> : <code>Vector&lt;TYPE&gt;</code><br>
Return type: <code>Null</code></p>

<p>Clears the contents of <em>subj</em> and copies into it all elements of <em>other</em>.</p>

<h6 id="size-3">size</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">size</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Int</code></p>

<p>Returns the number of elements in <em>subj</em>.</p>

<h5 id="sequence-container-methods-2">Sequence container methods</h5>

<h6 id="back-3">back</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">back</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <em>TYPE</em></p>

<p>Returns the reference to the last element of <em>subj</em>. <br><em>subj</em> must non-empty, or exception will be thrown.</p>

<h6 id="begin-3">begin</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">begin</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Position</code></p>

<p>Returns the <code>Position</code> object for the first element of <em>subj</em>. If <em>subj</em> is empty, the function returns <code>end</code> position.</p>

<h6 id="end-3">end</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">end</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Position</code></p>

<p>Returns the <code>Position</code> object pointing to the end of <em>subj</em>'s element sequence. The <code>end</code> position is the position after the last element. In an empty vector the <code>begin</code> position is equal to the <code>end</code> position.</p>

<h6 id="front-3">front</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">front</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <em>TYPE</em></p>

<p>Returns the first element of <em>subj</em>. If <em>subj</em> is empty, an exception will be thrown.</p>

<h6 id="reverse-3">reverse</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reverse</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Vector&lt;TYPE&gt;</code></p>

<p>Reverses <em>subj</em>'s element sequence. That is, "[1,2,3]" is transformed to "[3,2,1]". Returns the reference to the reversed <em>subj</em>.</p>

<h6 id="shuffle-3">shuffle</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">shuffle</span> <span class="nv">subj</span><span class="p">)</span>
</code></pre></div>

<p>Return type: <code>Vector&lt;TYPE&gt;</code></p>

<p>Randomly permutates the characters in <em>subj</em> and returns the reference to it.</p>

<h6 id="sort-3">sort</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">sort</span> <span class="nv">subj</span> <span class="p">[</span><span class="nv">cmpFunc</span><span class="p">])</span>
</code></pre></div>

<p>Parameters:<br>
<em>cmpFunc : Lambda</em> - (optional) comparison predicate function.<br>
Return type: <code>Vector&lt;TYPE&gt;</code></p>

<p>Sorts a vector. That is, arranges the vector's element sequence in ascending or descending order according to some comparison function. By default, the comparison of elements is done with the "less than" predicate. The reversed sorting order is achieved by using a reversed Range as the function's subject:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">v</span><span class="o">:</span> <span class="p">[</span><span class="mi">2</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="p">]</span><span class="o">,</span>
<span class="nv">f</span><span class="o">:</span> <span class="p">(</span><span class="nf">λ</span> <span class="p">(</span><span class="nf">lout</span> <span class="p">(</span><span class="nf">sort</span> <span class="nv">Range</span><span class="p">(</span><span class="nf">in</span><span class="o">:</span> <span class="nv">v</span> <span class="mi">-0</span> <span class="mi">0</span><span class="p">))))</span> <span class="c1">// [3, 2, 1, 0]</span>
</code></pre></div>

<h2 id="streams">Streams</h2>

<p>A stream is an object that can function as a generalized input/output (I/O) channel. Abstract class <code>Stream</code> implements this generalized IO channel. ٰConcrete stream classes inherit the <code>Stream</code> class and support a common interface for reading or outputting data to and from various sources/destinations in a uniform way.</p>

<p>Transd defines five stream classes:</p>

<ul>
<li><code>StringStream</code> - generalized text I/O;</li>
<li><code>ByteStream</code> - generalized raw bytes I/O;</li>
<li><code>FileStream</code> - file I/O;</li>
<li><code>StdIn</code> - standard input stream;</li>
<li><code>StdOut</code> - standard output stream.</li>
</ul>

<p>Streams are used for reading/writing files, outputting text to the screen, for buffered I/O, etc.</p>

<h4 id="examples">Examples</h4>

<p><strong>Text output</strong></p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">textout</span> <span class="nv">to</span><span class="o">:</span> <span class="nv">StdOut</span> <span class="s">&quot;Hello!&quot;</span><span class="p">)</span> <span class="c1">// print to StdOut stream</span>
<span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;Hello!&quot;</span><span class="p">)</span> <span class="c1">// same as above, StdOut is the default stream for &#39;(textout)&#39;</span>
<span class="p">(</span><span class="k">with </span><span class="nv">fs</span> <span class="nv">FileStream</span><span class="p">()</span> <span class="p">(</span><span class="nf">open</span> <span class="nv">fs</span> <span class="s">&quot;C:/Temp/hello.txt&quot;</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">textout</span> <span class="nv">to</span><span class="o">:</span> <span class="nv">fs</span> <span class="s">&quot;Hello!&quot;</span><span class="p">))</span> <span class="c1">// write text to a file</span>
</code></pre></div>

<p><strong>Text input</strong></p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">with </span><span class="nv">str1</span> <span class="nv">String</span><span class="p">()</span> <span class="nv">fs</span> <span class="nv">FileStream</span><span class="p">()</span>
    <span class="p">(</span><span class="nf">textin</span> <span class="nv">from</span><span class="o">:</span> <span class="nv">StdIn</span> <span class="nv">str1</span><span class="p">)</span> <span class="c1">// read from StdIn to str1</span>
    <span class="p">(</span><span class="nf">textin</span> <span class="nv">str1</span><span class="p">)</span> <span class="c1">// same as above, StdIn is the default stream for &#39;(textin)&#39;</span>
    <span class="p">(</span><span class="nf">open</span> <span class="nv">fѕ</span> <span class="s">&quot;D:\\data\\datafile.txt&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">textin</span> <span class="nv">from</span><span class="o">:</span> <span class="nv">fs</span> <span class="nv">str1</span><span class="p">)</span> <span class="c1">// read text from a file</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Buffered output</strong></p>

<h3 id="stringstream">StringStream</h3>

<h3 id="bytestream">ByteStream</h3>

<h3 id="filestream">FileStream</h3>

<h2 id="built-in-functions">Built-in functions</h2>

<h6 id="textout">textout</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">textout</span> <span class="p">[</span><span class="nv">to</span><span class="o">:</span> <span class="o">&lt;</span><span class="nv">streamObj</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="nv">param</span><span class="p">]</span> <span class="o">...</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>streamObj : Stream</em> - (default: <code>StdOut</code>) a Stream object.<br>
<em>param</em> - a variable, literal or expression.</p>

<p>Return type: <code>Null</code></p>

<p>Prints out the parameters <code>[param]*</code> to a stream destination: <em>streamObj</em>. The destination can be of type <code>StringStream</code>, <code>ByteStream</code>, or <code>FileStream</code>. If the destination is not specified, the output is done to <code>StdOut</code>.</p>

<p><code>[param] ...</code> is a list of any number of space separated parameters. A parameter is any expression whose value can be represented by a text string. 'Null' values are represented by a null string and not printed.</p>

<p>Examples:</p>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">with </span><span class="nv">s</span> <span class="s">&quot;abcde&quot;</span>
    <span class="p">(</span><span class="nf">textout</span> <span class="p">(</span><span class="nf">front</span> <span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nf">back</span> <span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nf">clear</span> <span class="nv">s</span><span class="p">)</span> <span class="s">&quot; &quot;</span>
         <span class="p">(</span><span class="nf">eval</span> <span class="s">&quot;(front s)&quot;</span><span class="p">)</span> <span class="s">&quot; &quot;</span> <span class="p">(</span><span class="nf">eval</span> <span class="s">&quot;(back s)&quot;</span><span class="p">))</span>
<span class="p">)</span>
<span class="c1">// Output: ae false false</span>

<span class="p">(</span><span class="k">with </span><span class="nv">s</span> <span class="s">&quot;abcde&quot;</span> <span class="nv">n</span> <span class="mi">10</span>
    <span class="p">(</span><span class="nf">textout</span> <span class="s">&quot;The length of \&quot;&quot;</span> <span class="nv">s</span> <span class="s">&quot;\&quot; is &quot;</span> 
        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="o">&gt;</span> <span class="p">(</span><span class="nf">size</span> <span class="nv">s</span><span class="p">)</span> <span class="nv">n</span><span class="p">)</span> <span class="s">&quot;more&quot;</span> <span class="k">else </span><span class="s">&quot;less&quot;</span><span class="p">)</span> <span class="s">&quot; than &quot;</span> <span class="nv">n</span> <span class="s">&quot; characters&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="c1">// Output: The length of &quot;abcde&quot; is less than 10 characters.</span>
</code></pre></div>

<h2 id="built-in-classes">Built-in classes</h2>

<h3 id="directory">Directory</h3>

<h4 id="methods">Methods</h4>

<h6 id="read-2">read</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">read</span> <span class="nv">subj</span> <span class="nv">dir</span> <span class="nv">filePatt</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>dir</em> : <code>String</code> - the directory whose contents are to be read;<br>
<em>filePatt</em> : <code>String</code> - the regular expression with the pattern of file names to include.<br>
Return type: <code>Null</code></p>

<p>Reads the contents of a directory <em>dir</em> by enumerating file and directory names, contained in it, and storing them in the internal list. After that, file and directory names can be retrieved with the methods <code>(files)</code> and <code>(dirs)</code> respectively.</p>

<h6 id="read-rec">read-rec</h6>

<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">read-rec</span> <span class="nv">subj</span> <span class="nv">rootDir</span> <span class="nv">filePatt</span><span class="p">)</span>
</code></pre></div>

<p>Parameters:<br>
<em>rootDir</em> : <code>String</code> - the directory whose contents are to be read;
<em>filePatt</em>: <code>String</code> - the regular expression with the pattern of file names to include.
Return type: <code>Null</code></p>

<p>Recursively reads file and directory names in a directory tree. After that, file and directory names can be retrieved with the methods <code>(files)</code> and <code>(dirs)</code> respectively.</p>

<h3 id="tsdbase">TSDBase</h3>

<h3 id="filter">Filter</h3>

<p><br></p>

<hr />

<p><br></p>

<h2 id="container-functions">Container functions</h2>

<p>Container functions are functions that operate on more than one container class. That is they are not specific to some particular container class, but can be applyed to various container types (Vector, String, etc.) and they will produce the similar result.</p>

<h3 id="size-4">size</h3>

<p><code>(size subj)</code></p>

<p>Returns the number of elements in a container.</p>


<hr width="100%" style="margin:30px 0 0 0;">
</div>
<div id="footer">
  <p>&copy; Copyright 2021 <a href='&#109;ail&#116;o&#58;alb%65rger&#64;g%6Dai&#108;&#46;&#37;63o&#109;'>Albert Berger</a> &middot; All Rights Reserved</p>
</div>
</body>
</html>
